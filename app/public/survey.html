<!DOCTYPE html>
<html>
	<head>
		<title>Friend Survey</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class='col-md-10 col-md-offset-1'>
					<h1>Survey Questions</h1>
					<hr>
					<div class="panel panel-default">
						<div class="panel-body">
							<form role="form">
								<div class="form-group">
									<label for="">Name (required)</label>
									<input type="text" class="form-control" name id="name" required>
								</div>
								<div class="form-group">
									<label for="">Link to photo image. (required)</label>
									<input type="text" class="form-control" name id="photo" required>
								</div>
								<hr>
								<h3>Question 1</h3>
								<h4>How much do you like to cook?</h4>
								<label class="radio-inline">
									<input type="radio" name="q1" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q1" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q1" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q1" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q1" value="5"> 5 (Woo!!!)
								</label>
								<h3>Question 2</h3>
								<h4>How much do you love skeeball?</h4>
								<label class="radio-inline">
									<input type="radio" name="q2" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q2" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q2" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q2" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q2" value="5"> 5 (woo!!!)
								</label>
								<h3>Question 3</h3>
								<h4>Do you like to read?</h4>
								<label class="radio-inline">
									<input type="radio" name="q3" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q3" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q3" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q3" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q3" value="5"> 5 (woo!!!)
								</label>
								<h3>Question 4</h3>
								<h4>Ween is your favorite band!</h4>
								<label class="radio-inline">
									<input type="radio" name="q4" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q4" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q4" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q4" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q4" value="5"> 5 (woo!!!)
								</label>
								<h3>Question 5</h3>
								<h4>Do you like zombie movies?</h4>
								<label class="radio-inline">
									<input type="radio" name="q5" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q5" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q5" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q5" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q5" value="5"> 5 (woo!!!)
								</label>
								<h3>Question 6</h3>
								<h4>Do you like Rick and Morty?</h4>
								<label class="radio-inline">
									<input type="radio" name="q6" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q6" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q6" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q6" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q6" value="5"> 5 (woo!!!)
								</label>
								<h3>Question 7</h3>
								<h4>Do you like to travel?</h4>
								<label class="radio-inline">
									<input type="radio" name="q7" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q7" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q7" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q7" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q7" value="5"> 5 (woo!!!)
								</label>
								<h3>Question 8</h3>
								<h4>Do you like pizza?</h4>
								<label class="radio-inline">
									<input type="radio" name="q8" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q8" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q8" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q8" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q8" value="5"> 5 (woo!!!)
								</label>
								<h3>Question 9</h3>
								<h4>Do you like to code?</h4>
								<label class="radio-inline">
									<input type="radio" name="q9" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q9" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q9" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q9" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q9" value="5"> 5 (woo!!!)
								</label>
								<h3>Question 10</h3>
								<h4>Do you like dogs?</h4>
								<label class="radio-inline">
									<input type="radio" name="q10" value="1" required value='1'> 1 (not at all...)
								</label>
								<label class="radio-inline">
									<input type="radio" name="q10" value="2"> 2
								</label>
								<label class="radio-inline">
									<input type="radio" name="q10" value="3"> 3
								</label>
								<label class="radio-inline">
									<input type="radio" name="q10" value="4"> 4
								</label>
								<label class="radio-inline">
									<input type="radio" name="q10" value="5"> 5 (woo!!!)
								</label>
								<br>
								<br>
								<button type="submit" class="btn btn-primary submit">Submit</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>

<script type="text/javascript">
	
		$(".submit").on("click", function() {
			var newScores = [

			];
			for (var i = 1; i <= 10; i++) {
				var selectedOption = $('input:radio[name=q'+ i + "]:checked").val();
				newScores.push(parseInt(selectedOption));
			}
			var currentSurveyResults = {
				name: $('#name').val().trim(),
				photo: $('#photo').val().trim(),
				scores: newScores
			};

			console.log(currentSurveyResults);

			//get the location of the root page
			var currentURL = window.location.origin;
			var greatestDifferenceResults = 0;
			var differenceFriendResultsArr = [];

			$.post(currentURL + '/api/friends', currentSurveyResults, function(data) {
				//reference the array of objects with data callback
				//console.log(data[0].name);
				for (var i = 0; i < data.length - 1; i++) {
					var friendScoresArr = data[i].scores;
					for (var j = 0; j < friendScoresArr.length; j++) {
						greatestDifferenceResults += Math.abs(currentSurveyResults.scores[j] - friendScoresArr[j]);
					}
					differenceFriendResultsArr.push(greatestDifferenceResults);
				}

				var findSmallestIndexForFriends = differenceFriendResultsArr[0];
				for (var i = 1; i < differenceFriendResultsArr.length; i++) {
					if (differenceFriendResultsArr[i] < findSmallestIndexForFriends) {
						findSmallestIndexForFriends = differenceFriendResultsArr[i];
					}
				}

				console.log(data[findSmallestIndexForFriends]);
			});


			return false;
		});
	
</script>